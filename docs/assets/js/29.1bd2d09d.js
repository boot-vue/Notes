(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{389:function(s,t,n){"use strict";n.r(t);var a=n(12),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"kong"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#kong"}},[s._v("#")]),s._v(" Kong")]),s._v(" "),n("h2",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# postgresql")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run -d --name kong-database "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5432")]),s._v(":5432 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"POSTGRES_USER=kong"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"POSTGRES_DB=kong"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"POSTGRES_PASSWORD=kong"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                postgres:9.6\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化数据库")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run --rm "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --link kong-database:kong-database "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_DATABASE=postgres"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_PG_HOST=kong-database"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_PG_PASSWORD=kong"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_CASSANDRA_CONTACT_POINTS=kong-database"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    kong kong migrations up\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kong")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run -d --name kong "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --link kong-database:kong-database "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_DATABASE=postgres"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_PG_HOST=kong-database"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_PG_PASSWORD=kong"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_CASSANDRA_CONTACT_POINTS=kong-database"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_PROXY_ACCESS_LOG=/dev/stdout"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_ADMIN_ACCESS_LOG=/dev/stdout"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_PROXY_ERROR_LOG=/dev/stderr"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_ADMIN_ERROR_LOG=/dev/stderr"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KONG_ADMIN_LISTEN=0.0.0.0:8001, 0.0.0.0:8444 ssl"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":8000 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(":8443 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8001")]),s._v(":8001 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8444")]),s._v(":8444 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    kong\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# konga 数据库")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run --link kong-database:kong-database --rm pantsel/konga:latest -c prepare -a postgres -u postgresql://kong:kong@kong-database:5432/konga\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# konga")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run -d -p "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1337")]),s._v(":1337 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n          --link kong-database:kong-database "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n          -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"TOKEN_SECRET=123456"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n          -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DB_ADAPTER=postgres"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n          -e "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DB_URI=postgresql://kong:kong@kong-database:5432/konga"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n          --name konga "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n          pantsel/konga    \n")])])]),n("h2",{attrs:{id:"使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),n("blockquote",[n("p",[s._v("upstream --\x3e services --\x3e routes")])])])}),[],!1,null,null,null);t.default=e.exports}}]);