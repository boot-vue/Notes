(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{421:function(t,a,e){"use strict";e.r(a);var r=e(12),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"kafka-ğŸ’¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kafka-ğŸ’¥"}},[t._v("#")]),t._v(" Kafka ğŸ’¥")]),t._v(" "),e("blockquote",[e("p",[t._v("åŸºäºå‘å¸ƒ/è®¢é˜…æ¨¡å¼")])]),t._v(" "),e("p",[t._v("æ—§ç‰ˆæœ¬ Zookeeper æœ‰å­˜æ¶ˆæ¯æ¶ˆè´¹ä½ç½® æ–°ç‰ˆæœ¬ç›´æ¥å­˜å‚¨åˆ° kafaka é›†ç¾¤ä¸­\næ¶ˆæ¯ä¿å­˜æ ¹æ® Topic å½’ç±», producer ä¸ consumer, é›†ç¾¤ä¸­æ¯ä¸ª kafka å®ä¾‹ç§°ä¸º broker, æ•´ä¸ªé›†ç¾¤ä¸ consumer ä¾èµ– zookeeper, kafka åªæ”¯æŒ consumer poll è½®è¯¢è·å–æ¶ˆæ¯.")]),t._v(" "),e("h2",{attrs:{id:"topic"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#topic"}},[t._v("#")]),t._v(" Topic")]),t._v(" "),e("p",[t._v("åˆ†åŒº æ•°æ®å­˜å‚¨, topic ä¸‹åŒ…å« "),e("code",[t._v("leader")]),t._v(" ä¸ "),e("code",[t._v("follower")]),t._v(", ä¸€ä¸ª topic å®é™…å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ç›®å½•")]),t._v(" "),e("h2",{attrs:{id:"consumer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#consumer"}},[t._v("#")]),t._v(" Consumer")]),t._v(" "),e("p",[t._v("åŒä¸€ä¸ªç»„ä¸‹çš„ consumer ä¸èƒ½æ¶ˆè´¹åŒä¸€ä¸ªåˆ†åŒºçš„æ•°æ®")]),t._v(" "),e("h2",{attrs:{id:"é…ç½®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®"}},[t._v("#")]),t._v(" é…ç½®")]),t._v(" "),e("p",[t._v("broker é›†ç¾¤:")]),t._v(" "),e("p",[t._v("server.properties")]),t._v(" "),e("div",{staticClass:"language-properties extra-class"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è®¾ç½®å”¯ä¸€çš„id")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("broker.id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("0")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#å…è®¸åˆ é™¤")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("delete.topic.enable")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#logsç›®å½•  ä¸åªæ—¥å¿—  æ•°æ®ä¹Ÿå­˜åœ¨è¿™é‡Œ")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("log.dirs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("....")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#zookeeper")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("zookeeper.connect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("xxxx:2181,xxxx:2181")]),t._v("\n")])])]),e("h2",{attrs:{id:"æ•°æ®å¯é æ€§"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®å¯é æ€§"}},[t._v("#")]),t._v(" æ•°æ®å¯é æ€§")]),t._v(" "),e("blockquote",[e("p",[t._v("ç”Ÿäº§è€…å‘é€æ¶ˆæ¯, å…¨éƒ¨åˆ†åŒºéƒ½è¦åŒæ­¥æˆåŠŸ è¿”å›æˆåŠŸ ACK, ç”Ÿäº§è€…ç»§ç»­å‘")])]),t._v(" "),e("blockquote",[e("p",[t._v("leader---\x3efollower åŒæ­¥èŠ‚ç‚¹æ…¢çš„æˆ–è€…æŒ‚äº†çš„å‰”å‡ºåŒæ­¥")])]),t._v(" "),e("blockquote",[e("p",[t._v("æŸäº›ä¸é‡è¦çš„æ•°æ®, ä¸éœ€è¦å®Œå…¨åŒæ­¥æˆåŠŸ")])]),t._v(" "),e("h3",{attrs:{id:"ä¸€è‡´æ€§"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€è‡´æ€§"}},[t._v("#")]),t._v(" ä¸€è‡´æ€§")]),t._v(" "),e("p",[t._v("æ•°æ®ä¸ä¸€è‡´, æ¶ˆè´¹è€…å¯è§ offset: æ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰çš„æ•°æ®æœ€å°çš„ log end offset\né‡æ–°é€‰ä¸¾ leader æ—¶, ä¸åŒå‰¯æœ¬ä¸ä¸€è‡´çš„æ•°æ®(>log end offset)çš„æ•°æ®ä¸¢å¼ƒ")]),t._v(" "),e("h2",{attrs:{id:"å‘½ä»¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å‘½ä»¤"}},[t._v("#")]),t._v(" å‘½ä»¤")]),t._v(" "),e("ol",[e("li",[t._v("æ’å…¥ topic :")])]),t._v(" "),e("blockquote",[e("p",[t._v("bin/kafka-topics.sh --create --zookeeper xxx:2181 --partitions 2 --replication-factor 3 --topic test")])]),t._v(" "),e("p",[t._v("2 ä¸ªåˆ†åŒº 3 ä¸ªå‰¯æœ¬, æ¯ä¸ªåˆ†åŒºå®é™…åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶ç›®å½•. å‰¯æœ¬æ•°ä¸èƒ½å¤§äº zookeeper é›†ç¾¤ä¸Šæ³¨å†Œçš„ broker æ•°é‡")]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("æŸ¥è¯¢ topic:")])]),t._v(" "),e("blockquote",[e("p",[t._v("bin/kafka-topics.sh --list --zookeeper xxxx:2181")])]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("producer å‘é€æ¶ˆæ¯:")])]),t._v(" "),e("blockquote",[e("p",[t._v("bin/kafka-console-producer.sh --broker-list xxxx:9092 --topic test")])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("consumer æ¶ˆè´¹æ¶ˆæ¯:")])]),t._v(" "),e("blockquote",[e("p",[t._v("bin/kafka-console-consumer.sh --zookeeper xxx:2181 --topic test [--from-beginning] (æ–°ç‰ˆæœ¬æ¶ˆè´¹ç«¯æ¶ˆæ¯çš„ offset ç›´æ¥ç»´æŠ¤åœ¨ broker ä¸­, ä¸èµ° zookeeper)")])]),t._v(" "),e("blockquote",[e("p",[t._v("bin/kafka-console-consumer.sh --bootstrap-server xxx:9092 --topic test [--from-beginning]")])]),t._v(" "),e("h2",{attrs:{id:"ack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ack"}},[t._v("#")]),t._v(" ACK")]),t._v(" "),e("ol",[e("li",[t._v("0: ä¸åœçš„å‘,æ— éœ€ ack")]),t._v(" "),e("li",[t._v("1: leader ç¡®è®¤ä»¥åç»§ç»­å‘")]),t._v(" "),e("li",[t._v("all(-1): leader ä¸æ‰€æœ‰çš„ consumer åº”ç­”ç¡®è®¤åç»§ç»­å‘")])]),t._v(" "),e("blockquote",[e("p",[t._v("è¦ä¹ˆé‡å¤ è¦ä¹ˆä¸¢æ•°æ®")])]),t._v(" "),e("h3",{attrs:{id:"å¹‚ç­‰æ€§"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¹‚ç­‰æ€§"}},[t._v("#")]),t._v(" å¹‚ç­‰æ€§")]),t._v(" "),e("p",[t._v("å»é‡ "),e("code",[t._v("enbale.idompotence=true")]),t._v(" ack é»˜è®¤ä¸º all(-1)")]),t._v(" "),e("h2",{attrs:{id:"java-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#java-api"}},[t._v("#")]),t._v(" Java Api")]),t._v(" "),e("ol",[e("li",[t._v("KafkaProducer, KafkaConsumer")]),t._v(" "),e("li",[t._v("SimpleConsumer---\x3eéå†, è·å–æŸä¸ª topic,æŸä¸ªåˆ†åŒºçš„ leader--\x3eé€šè¿‡ leader host ,æ„é€  SimpleConsumer è·å–æ•°æ®")])]),t._v(" "),e("h2",{attrs:{id:"stream-æµå¼å¤„ç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stream-æµå¼å¤„ç†"}},[t._v("#")]),t._v(" Stream æµå¼å¤„ç†")]),t._v(" "),e("p",[t._v("å¼±é¸¡")])])}),[],!1,null,null,null);a.default=s.exports}}]);