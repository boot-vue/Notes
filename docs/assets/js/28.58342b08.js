(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{395:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"å…¶å®ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¶å®ƒ"}},[t._v("#")]),t._v(" å…¶å®ƒ")]),t._v(" "),a("p",[t._v("ä¹±ä¸ƒå…«ç³Ÿ ğŸ’£ğŸ’£ğŸ’£")]),t._v(" "),a("h2",{attrs:{id:"systemctl-æœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#systemctl-æœåŠ¡"}},[t._v("#")]),t._v(" systemctl æœåŠ¡")]),t._v(" "),a("blockquote",[a("p",[t._v("/usr/lib/systemd/ä¸‹, å¼€æœºä¸ç™»å½•å°±èƒ½å¯åŠ¨çš„æœåŠ¡æœ€å¥½æ”¾åœ¨ /usr/lib/systemd/system ç³»ç»ŸæœåŠ¡, .../user: ç”¨æˆ·æœåŠ¡ éœ€è¦ç”¨æˆ·ç™»å½•æ‰å¯ä»¥å¯åŠ¨")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# [Unit]ã€[Service]å’Œ[Install]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Unit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä¸»è¦æ˜¯æœåŠ¡è¯´æ˜")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Description")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("test   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç®€å•æè¿°æœåŠ¡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("After")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("network.target    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æè¿°æœåŠ¡ç±»åˆ«ï¼Œè¡¨ç¤ºæœ¬æœåŠ¡éœ€è¦åœ¨networkæœåŠ¡å¯åŠ¨ååœ¨å¯åŠ¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Before")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("xxx.service      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è¡¨ç¤ºéœ€è¦åœ¨æŸäº›æœåŠ¡å¯åŠ¨ä¹‹å‰å¯åŠ¨ï¼ŒAfterå’ŒBeforeå­—æ®µåªæ¶‰åŠå¯åŠ¨é¡ºåºï¼Œä¸æ¶‰åŠä¾èµ–å…³ç³»")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ ¸å¿ƒåŒºåŸŸ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("forking     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è¡¨ç¤ºåå°è¿è¡Œæ¨¡å¼ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("root        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¾ç½®æœåŠ¡è¿è¡Œçš„ç”¨æˆ·")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Group")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("root       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è®¾ç½®æœåŠ¡è¿è¡Œçš„ç”¨æˆ·ç»„")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("KillMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("control-group   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å®šä¹‰systemdå¦‚ä½•åœæ­¢æœåŠ¡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PIDFile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/test/test.pid    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å­˜æ”¾PIDçš„ç»å¯¹è·¯å¾„")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("no        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å®šä¹‰æœåŠ¡è¿›ç¨‹é€€å‡ºåï¼Œsystemdçš„é‡å¯æ–¹å¼ï¼Œé»˜è®¤æ˜¯ä¸é‡å¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/test/bin/startup.sh    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æœåŠ¡å¯åŠ¨å‘½ä»¤ï¼Œå‘½ä»¤éœ€è¦ç»å¯¹è·¯å¾„")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecReload")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/xxxxx\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecStop")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/xxxxx\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PrivateTmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true                               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è¡¨ç¤ºç»™æœåŠ¡åˆ†é…ç‹¬ç«‹çš„ä¸´æ—¶ç©ºé—´")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Install"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("WantedBy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("multi-user.target  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¤šç”¨æˆ·")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Typeçš„ç±»å‹æœ‰ï¼š")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    simple(é»˜è®¤ï¼‰ï¼š# ä»¥ExecStartå­—æ®µå¯åŠ¨çš„è¿›ç¨‹ä¸ºä¸»è¿›ç¨‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    forking:  # ExecStartå­—æ®µä»¥fork()æ–¹å¼å¯åŠ¨ï¼Œæ­¤æ—¶çˆ¶è¿›ç¨‹å°†é€€å‡ºï¼Œå­è¿›ç¨‹å°†æˆä¸ºä¸»è¿›ç¨‹ï¼ˆåå°è¿è¡Œï¼‰ã€‚ä¸€èˆ¬éƒ½è®¾ç½®ä¸ºforking")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    oneshot:  # ç±»ä¼¼äºsimpleï¼Œä½†åªæ‰§è¡Œä¸€æ¬¡ï¼Œsystemdä¼šç­‰å®ƒæ‰§è¡Œå®Œï¼Œæ‰å¯åŠ¨å…¶ä»–æœåŠ¡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    dbusï¼š    # ç±»ä¼¼äºsimple, ä½†ä¼šç­‰å¾…D-Busä¿¡å·åå¯åŠ¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    notify:   # ç±»ä¼¼äºsimple, å¯åŠ¨ç»“æŸåä¼šå‘å‡ºé€šçŸ¥ä¿¡å·ï¼Œç„¶åsystemdå†å¯åŠ¨å…¶ä»–æœåŠ¡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    idleï¼š    # ç±»ä¼¼äºsimpleï¼Œä½†æ˜¯è¦ç­‰åˆ°å…¶ä»–ä»»åŠ¡éƒ½æ‰§è¡Œå®Œï¼Œæ‰ä¼šå¯åŠ¨è¯¥æœåŠ¡ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#EnvironmentFile:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œå’Œè¿è¯å·ç»„åˆä½¿ç”¨ï¼Œå¯ä»¥é¿å…é…ç½®æ–‡ä»¶ä¸å­˜åœ¨çš„å¼‚å¸¸ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Environment:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    åé¢æ¥å¤šä¸ªä¸åŒçš„shellå˜é‡ã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    ä¾‹å¦‚ï¼š")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Environment=DATA_DIR=/data/elk")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Environment=LOG_DIR=/var/log/elasticsearch")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    Environment=PID_DIR=/var/run/elasticsearch")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    EnvironmentFile=-/etc/sysconfig/elasticsearch")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è¿è¯å·ï¼ˆ-ï¼‰ï¼šåœ¨æ‰€æœ‰å¯åŠ¨è®¾ç½®ä¹‹å‰ï¼Œæ·»åŠ çš„å˜é‡å­—æ®µï¼Œéƒ½å¯ä»¥åŠ ä¸Šè¿è¯å·")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    è¡¨ç¤ºæŠ‘åˆ¶é”™è¯¯ï¼Œå³å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¸å½±å“å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œã€‚")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    æ¯”å¦‚`EnviromentFile=-/etc/sysconfig/xxx` è¡¨ç¤ºå³ä½¿æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šæŠ›å¼‚å¸¸")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#KillModeçš„ç±»å‹ï¼š")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    control-group(é»˜è®¤)ï¼š# å½“å‰æ§åˆ¶ç»„é‡Œçš„æ‰€æœ‰å­è¿›ç¨‹ï¼Œéƒ½ä¼šè¢«æ€æ‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    process: # åªæ€ä¸»è¿›ç¨‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    mixed:   # ä¸»è¿›ç¨‹å°†æ”¶åˆ°SIGTERMä¿¡å·ï¼Œå­è¿›ç¨‹æ”¶åˆ°SIGKILLä¿¡å·")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    none:    # æ²¡æœ‰è¿›ç¨‹ä¼šè¢«æ€æ‰ï¼Œåªæ˜¯æ‰§è¡ŒæœåŠ¡çš„stopå‘½ä»¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Restartçš„ç±»å‹ï¼š")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    no(é»˜è®¤å€¼)ï¼š # é€€å‡ºåæ— æ“ä½œ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    on-success:  # åªæœ‰æ­£å¸¸é€€å‡ºæ—¶ï¼ˆé€€å‡ºçŠ¶æ€ç ä¸º0ï¼‰,æ‰ä¼šé‡å¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    on-failure:  # éæ­£å¸¸é€€å‡ºæ—¶ï¼Œé‡å¯ï¼ŒåŒ…æ‹¬è¢«ä¿¡å·ç»ˆæ­¢å’Œè¶…æ—¶ç­‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    on-abnormal: # åªæœ‰è¢«ä¿¡å·ç»ˆæ­¢æˆ–è¶…æ—¶ï¼Œæ‰ä¼šé‡å¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    on-abort:    # åªæœ‰åœ¨æ”¶åˆ°æ²¡æœ‰æ•æ‰åˆ°çš„ä¿¡å·ç»ˆæ­¢æ—¶ï¼Œæ‰ä¼šé‡å¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    on-watchdog: # è¶…æ—¶é€€å‡ºæ—¶ï¼Œæ‰ä¼šé‡å¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    always:      # ä¸ç®¡ä»€ä¹ˆé€€å‡ºåŸå› ï¼Œéƒ½ä¼šé‡å¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    # å¯¹äºå®ˆæŠ¤è¿›ç¨‹ï¼Œæ¨èç”¨on-failure")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#RestartSecå­—æ®µï¼š")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    è¡¨ç¤ºsystemdé‡å¯æœåŠ¡ä¹‹å‰ï¼Œéœ€è¦ç­‰å¾…çš„ç§’æ•°ï¼šRestartSec: 30")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#å„ç§Exec*å­—æ®µï¼š")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    # Exec* åé¢æ¥çš„å‘½ä»¤ï¼Œä»…æ¥å—â€œæŒ‡ä»¤ å‚æ•° å‚æ•°..â€æ ¼å¼ï¼Œä¸èƒ½æ¥å—<>|&ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œå¾ˆå¤šbashè¯­æ³•ä¹Ÿä¸æ”¯æŒã€‚å¦‚æœæƒ³æ”¯æŒbashè¯­æ³•ï¼Œéœ€è¦è®¾ç½®Tyep=oneshot")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    ExecStartï¼š    # å¯åŠ¨æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    ExecReloadï¼š   # é‡å¯æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    ExecStopï¼š     # åœæ­¢æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    ExecStartPreï¼š # å¯åŠ¨æœåŠ¡å‰æ‰§è¡Œçš„å‘½ä»¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    ExecStartPostï¼š# å¯åŠ¨æœåŠ¡åæ‰§è¡Œçš„å‘½ä»¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    ExecStopPostï¼š # åœæ­¢æœåŠ¡åæ‰§è¡Œçš„å‘½ä»¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#WantedByå­—æ®µï¼š")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    multi-user.target: # è¡¨ç¤ºå¤šç”¨æˆ·å‘½ä»¤è¡ŒçŠ¶æ€ï¼Œè¿™ä¸ªè®¾ç½®å¾ˆé‡è¦")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    graphical.target:  # è¡¨ç¤ºå›¾å½¢ç”¨æˆ·çŠ¶ä½“ï¼Œå®ƒä¾èµ–äºmulti-user.target")]),t._v("\n")])])]),a("h2",{attrs:{id:"å¹¶å‘ç¼–ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶å‘ç¼–ç¨‹"}},[t._v("#")]),t._v(" å¹¶å‘ç¼–ç¨‹")]),t._v(" "),a("p",[a("code",[t._v("Executors")]),t._v(" çº¿ç¨‹æ±  "),a("code",[t._v("newFixedThreadPool")]),t._v(" "),a("code",[t._v("newCachedThreadPool")]),t._v(" "),a("code",[t._v("newSingleThreadExecutor")]),t._v(" "),a("code",[t._v("newScheduledThreadPool")]),t._v(", æœ€å¥½é€šè¿‡"),a("code",[t._v("ThreadPoolExecutor")]),t._v("åˆ›å»ºçº¿ç¨‹æ± ")]),t._v(" "),a("p",[t._v("æ–¹æ³•: "),a("code",[t._v("execute(Runable)")]),t._v(" "),a("code",[t._v("shutdown()")]),t._v(" "),a("code",[t._v("Future<T> submit(Callable)")])]),t._v(" "),a("p",[a("code",[t._v("Future")]),t._v(" æ–¹æ³•"),a("code",[t._v("isDone()")]),t._v("åˆ¤æ–­ä»»åŠ¡æ˜¯å¦æ‰§è¡Œå®Œæˆ, "),a("code",[t._v("get()")]),t._v("è·å–ç»“æœ "),a("code",[t._v("cancel()")]),t._v("å–æ¶ˆä»»åŠ¡")]),t._v(" "),a("h2",{attrs:{id:"å‡½æ•°å¼ç¼–ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‡½æ•°å¼ç¼–ç¨‹"}},[t._v("#")]),t._v(" å‡½æ•°å¼ç¼–ç¨‹")]),t._v(" "),a("p",[a("code",[t._v("Function")]),t._v(": apply andThen\n"),a("code",[t._v("Consumer")]),t._v(": accept æ–¹æ³•\n"),a("code",[t._v("Predicate")]),t._v(" test æ–¹æ³•\n"),a("code",[t._v("Supplier")]),t._v(": get æ–¹æ³•")]),t._v(" "),a("h2",{attrs:{id:"rabbit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rabbit"}},[t._v("#")]),t._v(" Rabbit")]),t._v(" "),a("h3",{attrs:{id:"æ³¨æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ³¨æ„"}},[t._v("#")]),t._v(" æ³¨æ„:")]),t._v(" "),a("ol",[a("li",[t._v("å¦‚æœä¸æŒ‡å®š exchange, é»˜è®¤èµ° amqp default exchange, ==routing-key==ä¸==queue==ååŒ¹é…ä¸€è‡´æŠ•é€’")])]),t._v(" "),a("h3",{attrs:{id:"exchange-äº¤æ¢æœº"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exchange-äº¤æ¢æœº"}},[t._v("#")]),t._v(" exchange äº¤æ¢æœº")]),t._v(" "),a("ol",[a("li",[t._v("direct: ==routing-key==å¿…é¡»å®Œå…¨åŒ¹é…")]),t._v(" "),a("li",[t._v("topic: ==routing-key==æ¨¡ç³ŠåŒ¹é…")])]),t._v(" "),a("blockquote",[a("p",[t._v("#åŒ¹é…å¤šä¸ªè¯ *åŒ¹é…ä¸€ä¸ªè¯")])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("fanout: ==ä¸å¤„==ç† routing-key, exchange ä¸ queue ç›´æ¥ç»‘å®š")])]),t._v(" "),a("h3",{attrs:{id:"message-æ¶ˆæ¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#message-æ¶ˆæ¯"}},[t._v("#")]),t._v(" message æ¶ˆæ¯")]),t._v(" "),a("ol",[a("li",[t._v("å¯ä»¥æºå¸¦ properties å±æ€§")]),t._v(" "),a("li",[t._v("==mandotary===true, å‘é€ç«¯ä¼šç›‘å¬åˆ°è·¯ç”±ä¸åˆ°çš„æ¶ˆæ¯, å³ returnCallback, =false æ—¶, è·¯ç”±ä¸åˆ°çš„æ¶ˆæ¯ä¼šè¢«è‡ªåŠ¨åˆ é™¤")]),t._v(" "),a("li",[t._v("å‘é€ç«¯è¦å¤„ç†==confirmCallback== ==returnCallback==, é…ç½®é‡Œè¿™ä¸¤é¡¹å¿…é¡»è®¾ä¸º true")]),t._v(" "),a("li")]),t._v(" "),a("h3",{attrs:{id:"æ­»ä¿¡é˜Ÿåˆ—-ç‰¹æ®Šçš„-exchange"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ­»ä¿¡é˜Ÿåˆ—-ç‰¹æ®Šçš„-exchange"}},[t._v("#")]),t._v(" æ­»ä¿¡é˜Ÿåˆ—(ç‰¹æ®Šçš„ exchange)")]),t._v(" "),a("ol",[a("li",[t._v("æ¶ˆæ¯è¢« nack å¹¶ä¸” requeue=false")]),t._v(" "),a("li",[t._v("ttl æ¶ˆæ¯è¿‡æœŸ")]),t._v(" "),a("li",[t._v("é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("ç§ä¿¡: å°±æ˜¯æ™®é€šçš„exchange--"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("queueç»‘å®š\n\nä¸šåŠ¡queue æ·»åŠ é¢å¤–çš„å‚æ•°: x-dead-letter-exchange"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("æ­»ä¿¡äº¤æ¢æœº\n\nè¿™æ ·ä¸šåŠ¡queueä¸Šæœªæ¶ˆè´¹çš„æ¶ˆæ¯å°±è·¯ç”±åˆ°äº†ç§ä¿¡äº¤æ¢æœºä¸Š\n")])])]),a("h3",{attrs:{id:"æ¶ˆè´¹è€…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆè´¹è€…"}},[t._v("#")]),t._v(" æ¶ˆè´¹è€…")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Consumer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RabbitListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bindings "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@QueueBinding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Queue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test.queue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" durable "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" autoDelete "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            exchange "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Exchange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test.exchange"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" durable "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" autoDelete "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topic"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test.#"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RabbitHandler")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Channel")]),t._v(" channel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ç›‘å¬å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç›‘å¬å™¨"}},[t._v("#")]),t._v(" ç›‘å¬å™¨")]),t._v(" "),a("ol",[a("li",[t._v("simpleMessageListenerContainer")])]),t._v(" "),a("p",[t._v("ä¸ºé˜Ÿåˆ—æ·»åŠ ç›‘å¬äº‹ä»¶")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[t._v("messageListenerAdapter æ¶ˆæ¯é€‚é…å™¨")]),t._v(" "),a("p",[t._v("å¤„ç†æ–¹æ³• å¯ä»¥ä¸ºæ¯ä¸ªé˜Ÿåˆ—æŒ‡å®šä¸åŒçš„å¤„ç†æ–¹æ³•")])]),t._v(" "),a("li",[a("p",[t._v("messageConvert æ¶ˆæ¯è½¬åŒ–å™¨ java å¯¹è±¡ä¸ message å¯¹è±¡äº’è½¬")])])]),t._v(" "),a("h3",{attrs:{id:"é«˜å¯ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é«˜å¯ç”¨"}},[t._v("#")]),t._v(" é«˜å¯ç”¨")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("é•œåƒé˜Ÿåˆ— : é…ç½® 1 ä¸ª Master, å¤šä¸ª Slaver")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(". masterèŠ‚ç‚¹ /var/lib/rabbitmq/.erlang.cookie æ‹·è´åˆ°å„ä¸ªèŠ‚ç‚¹\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(". å¯åŠ¨æœåŠ¡ rabbitmq-server -detached\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(". å¤‡ç”¨èŠ‚ç‚¹åœæ­¢æœåŠ¡ rabbitmqctl stop_app\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(". å¤‡ç”¨èŠ‚ç‚¹åŠ å…¥åˆ°ä¸»èŠ‚ç‚¹é›†ç¾¤ä¸­ rabbitmqctl join_cluster rabbit@xxxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hostså"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(". å¤‡ç”¨èŠ‚ç‚¹å¯åŠ¨ rabbitmqctl start_app\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(". ä»»æ„èŠ‚ç‚¹è®¾ç½®é›†ç¾¤å rabbitmqctl set_cluster_name xxxx\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(". æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ rabbitmqctl cluster_status\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(". é…ç½®é•œåƒé˜Ÿåˆ—: rabbitmqctl set_policy ha-all "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"ha-mode":"all}\'')]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("haproxy: è´Ÿè½½å‡è¡¡")])])]),t._v(" "),a("h3",{attrs:{id:"æ’ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ’ä»¶"}},[t._v("#")]),t._v(" æ’ä»¶")]),t._v(" "),a("ol",[a("li",[t._v("å»¶æ—¶æ’ä»¶"),a("code",[t._v("rabbitmq_delayed_message_exchange")]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(". /usr/lib/rabbitmq/lib/rabbitmq_serverxxx/plugins\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(". rabbitmq-plugins "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" xxxx\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(". å£°æ˜ä¸€ä¸ªx-delayed-typeç±»å‹çš„exchange\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(". å‘é€æ¶ˆæ¯æ—¶,æ¶ˆæ¯headerséœ€è¦æŒ‡å®šx-delay"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("xxæ¯«ç§’\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"spring-äº‹åŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-äº‹åŠ¡"}},[t._v("#")]),t._v(" Spring äº‹åŠ¡")]),t._v(" "),a("p",[t._v("éš”ç¦»çº§åˆ«:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ISOLATION_DEFAULT\tä½¿ç”¨åç«¯æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«\nISOLATION_READ_UNCOMMITTED\tå…è®¸è¯»å–å°šæœªæäº¤çš„æ›´æ”¹ã€‚å¯èƒ½å¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»\nISOLATION_READ_COMMITTED\tå…è®¸ä»å·²ç»æäº¤çš„å¹¶å‘äº‹åŠ¡è¯»å–ã€‚å¯é˜²æ­¢è„è¯»ï¼Œä½†å¹»è¯»å’Œä¸å¯é‡å¤è¯»ä»å¯èƒ½ä¼šå‘ç”Ÿ\nISOLATION_REPEATABLE_READ\tå¯¹ç›¸åŒå­—æ®µçš„å¤šæ¬¡è¯»å–çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œé™¤éæ•°æ®è¢«å½“å‰äº‹åŠ¡æœ¬èº«æ”¹å˜ã€‚å¯é˜²æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»å¯èƒ½å‘ç”Ÿ\nISOLATION_SERIALIZABLE\tå®Œå…¨æœä»ACIDçš„éš”ç¦»çº§åˆ«ï¼Œç¡®ä¿ä¸å‘ç”Ÿè„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚è¿™åœ¨æ‰€æœ‰éš”ç¦»çº§åˆ«ä¸­ä¹Ÿæ˜¯æœ€æ…¢çš„ï¼Œå› ä¸ºå®ƒé€šå¸¸æ˜¯é€šè¿‡å®Œå…¨é”å®šå½“å‰äº‹åŠ¡æ‰€æ¶‰åŠçš„æ•°æ®è¡¨æ¥å®Œæˆçš„, å¯ä»¥åŠ å…±äº«é”(ä¸æ’ä»–), ä¸€ä¸ªäº‹åŠ¡ä¸é‡Šæ”¾,å…¶å®ƒäº‹åŠ¡åªèƒ½è¯»æ•°æ®\n")])])]),a("p",[t._v("ä¼ æ’­æœºåˆ¶:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("PROPAGATION_MANDATORY\tè¡¨ç¤ºè¯¥æ–¹æ³•å¿…é¡»è¿è¡Œåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡æ­£åœ¨å‘ç”Ÿï¼Œå°†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸\nPROPAGATION_NESTED\tè¡¨ç¤ºå¦‚æœå½“å‰æ­£æœ‰ä¸€ä¸ªäº‹åŠ¡åœ¨è¿›è¡Œä¸­ï¼Œåˆ™è¯¥æ–¹æ³•åº”å½“è¿è¡Œåœ¨ä¸€ä¸ªåµŒå¥—å¼äº‹åŠ¡ä¸­ã€‚è¢«åµŒå¥—çš„äº‹åŠ¡å¯ä»¥ç‹¬ç«‹äºå°è£…äº‹åŠ¡è¿›è¡Œæäº¤æˆ–å›æ»šã€‚å¦‚æœå°è£…äº‹åŠ¡ä¸å­˜åœ¨ï¼Œè¡Œä¸ºå°±åƒPROPAGATION_REQUIRESä¸€æ ·ã€‚\nPROPAGATION_NEVER\tè¡¨ç¤ºå½“å‰çš„æ–¹æ³•ä¸åº”è¯¥åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­è¿è¡Œã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡æ­£åœ¨è¿›è¡Œï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚\nPROPAGATION_NOT_SUPPORTED\tè¡¨ç¤ºè¯¥æ–¹æ³•ä¸åº”è¯¥åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­è¿è¡Œã€‚å¦‚æœä¸€ä¸ªç°æœ‰äº‹åŠ¡æ­£åœ¨è¿›è¡Œä¸­ï¼Œå®ƒå°†åœ¨è¯¥æ–¹æ³•çš„è¿è¡ŒæœŸé—´è¢«æŒ‚èµ·ã€‚\nPROPAGATION_SUPPORTS\tè¡¨ç¤ºå½“å‰æ–¹æ³•ä¸éœ€è¦äº‹åŠ¡æ€§ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸€ä¸ªäº‹åŠ¡å·²ç»åœ¨è¿è¡Œçš„è¯ï¼Œå®ƒä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªäº‹åŠ¡é‡Œè¿è¡Œã€‚\nPROPAGATION_REQUIRES_NEW\tè¡¨ç¤ºå½“å‰æ–¹æ³•å¿…é¡»åœ¨å®ƒè‡ªå·±çš„äº‹åŠ¡é‡Œè¿è¡Œã€‚ä¸€ä¸ªæ–°çš„äº‹åŠ¡å°†è¢«å¯åŠ¨ï¼Œè€Œä¸”å¦‚æœæœ‰ä¸€ä¸ªç°æœ‰äº‹åŠ¡åœ¨è¿è¡Œçš„è¯ï¼Œåˆ™å°†åœ¨è¿™ä¸ªæ–¹æ³•è¿è¡ŒæœŸé—´è¢«æŒ‚èµ·ã€‚\nPROPAGATION_REQUIRES\tè¡¨ç¤ºå½“å‰æ–¹æ³•å¿…é¡»åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­è¿è¡Œã€‚å¦‚æœä¸€ä¸ªç°æœ‰äº‹åŠ¡æ­£åœ¨è¿›è¡Œä¸­ï¼Œè¯¥æ–¹æ³•å°†åœ¨é‚£ä¸ªäº‹åŠ¡ä¸­è¿è¡Œï¼Œå¦åˆ™å°±è¦å¼€å§‹ä¸€ä¸ªæ–°äº‹åŠ¡ã€‚\n")])])]),a("h2",{attrs:{id:"springmvc-å¼‚æ­¥å¤„ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springmvc-å¼‚æ­¥å¤„ç†"}},[t._v("#")]),t._v(" SpringMvc å¼‚æ­¥å¤„ç†")]),t._v(" "),a("p",[t._v("Callable å¤šçº¿ç¨‹æ¨¡å¼: ä¸»çº¿ç¨‹ä¸ä¼šè¢«é•¿æ—¶é—´é˜»å¡")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Callable")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("demo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Callable")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" callable "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Callable")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" callable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("DeferredResult: æ¥å—è¯·æ±‚---\x3eå¤„ç†ä»»åŠ¡| |å¤„ç†å®Œæ¯•--\x3eå“åº”ç»“æœ")]),t._v(" "),a("h2",{attrs:{id:"dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[t._v("#")]),t._v(" Dockerfile")]),t._v(" "),a("div",{staticClass:"language-docker extra-class"},[a("pre",{pre:!0,attrs:{class:"language-docker"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v("  å¿…é¡»æ˜¯ç¬¬ä¸€è¡Œ\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("maintainer")]),t._v(" ä½œè€…ä¿¡æ¯\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("copy")]),t._v(" æ‹·è´æ–‡ä»¶"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" addåŠŸèƒ½æ›´å¤š"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ä½ çŒœéƒ½æœ‰ä»€ä¹ˆåŠŸèƒ½"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("run")]),t._v("  æ„å»ºæ—¶çš„å‘½ä»¤\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("expose")]),t._v("  æš´éœ²ç«¯å£"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("åªæ˜¯å»ºè®®"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    å®é™…ä½¿ç”¨æ—¶è¿˜éœ€è¦æ‰‹åŠ¨"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("p  æŒ‡å®šç«¯å£æ˜ å°„\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("workdir")]),t._v(" æŒ‡å®šå·¥ä½œç›®å½• å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ä¼šåœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œ\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("cmd")]),t._v("  è¿è¡Œæ—¶å‘½ä»¤"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  ä¼šè¢«ä½¿ç”¨æ—¶å®¹å™¨çš„å‘½ä»¤è¦†ç›–\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("entrypoint")]),t._v("  ä¸ä¼šè¢«å®¹å™¨è¿è¡Œæ—¶å‘½ä»¤è¦†ç›–\n")])])]),a("blockquote",[a("p",[t._v("ADD COPY ENV EXPOSE FROM LABEL STOPSIGNAL USER VOLUME WORKDIR")])]),t._v(" "),a("ol",[a("li",[t._v("æ„å»º docker é•œåƒ")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("docker build -t tagåç§° "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" æŒ‡å®šDockerfileæ‰€åœ¨è·¯å¾„\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("ç™»å½•åˆ° hub")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("docker login\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("æ¨é€")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("docker push "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(":TAG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h2",{attrs:{id:"gradle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gradle"}},[t._v("#")]),t._v(" Gradle")]),t._v(" "),a("p",[t._v("gradle ä»»åŠ¡: å¾€ nexus å‘å¸ƒ jar")]),t._v(" "),a("div",{staticClass:"language-groovy extra-class"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Mavenä»“åº“çš„URL")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" MAVEN_REPO_RELEASE_URL"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://xxxx/nexus/content/repositories/releases/'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" MAVEN_REPO_SNAPSHOT_URL"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://xxxxx/nexus/content/repositories/snapshots/'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç™»å½•nexus çš„ç”¨æˆ·å")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" NEXUS_USERNAME"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç™»å½•nexus çš„å¯†ç ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" NEXUS_PASSWORD"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" ARTIFACT_ID "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'demo'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// type")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" TYPE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jar'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//description")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" DESCRIPTION "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¿™é‡Œæ˜¯æè¿°'")]),t._v("\n\nuploadArchives "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    configuration "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" configurations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("archives\n    repositories "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        mavenDeployer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("snapshotRepository")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" MAVEN_REPO_SNAPSHOT_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authentication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" NEXUS_USERNAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" NEXUS_PASSWORD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("repository")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" MAVEN_REPO_RELEASE_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authentication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" NEXUS_USERNAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" NEXUS_PASSWORD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("repository")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'C:\\\\Users\\\\dd\\\\.m2\\\\repository'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å®šä¹‰æœ¬åœ°mavenä»“åº“çš„åœ°å€")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("repository")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'C:\\\\Users\\\\dd\\\\.gradle\\\\caches\\\\modules-2\\\\files-2.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å®šä¹‰æœ¬åœ°Gradleä»“åº“çš„åœ°å€")]),t._v("\n            pom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("project "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                version version\n                artifactId ARTIFACT_ID\n                groupId group\n                packaging TYPE\n                description DESCRIPTION\n                licenses "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    license "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        name "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'The Apache Software License, Version 2.0'")]),t._v("\n                        url "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.apache.org/licenses/LICENSE-2.0.txt'")]),t._v("\n                        distribution "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxxxx'")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);