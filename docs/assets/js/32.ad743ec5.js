(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{390:function(t,s,a){"use strict";a.r(s);var r=a(42),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#proxy"}},[t._v("#")]),t._v(" Proxy")]),t._v(" "),a("p",[t._v("代理 负载均衡")]),t._v(" "),a("h2",{attrs:{id:"haproxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#haproxy"}},[t._v("#")]),t._v(" HaProxy")]),t._v(" "),a("p",[t._v("支持 TCP HTTP\n"),a("code",[t._v("global")]),t._v(": haproxy 运行相关的全局配置\n"),a("code",[t._v("defaults")]),t._v(": 默认参数配置\n"),a("code",[t._v("listen")]),t._v(": 监听配置\n"),a("code",[t._v("frontend")]),t._v(": 处理客户端请求, 按照规则分发请求\n"),a("code",[t._v("backend")]),t._v(": 后端集群配置")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 全局配置")]),t._v("\nglobal\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启用每个实例日志记录事件和流量。")]),t._v("\n    log global\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置日志文件输出定向")]),t._v("\n    log "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1 local3 info\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 需要开启rsyslog")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vim /etc/rsyslog.conf")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加local3.* /var/log/haproxy.log")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 改变当前工作目录")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chroot")]),t._v(" /usr/local/haproxy\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用户与用户组")]),t._v("\n    user haproxy\n    group haproxy\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 守护进程启动，运维方式为后台工作")]),t._v("\n    daemon\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 最大连接数")]),t._v("\n    maxconn "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4000")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 作用于其后紧跟的listen块，直至下一个defaults 块，下一个default 将替换上一个块作用于以后的listen")]),t._v("\ndefaults\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 默认的模式mode { tcp|http|health }，tcp是4层，http是7层，health只会返回OK")]),t._v("\n    mode http\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# maxconn 65535         maxconn 每个进程可用的最大连接数")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# retries 3         当对server的connection失败后，重试的次数 　")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# option abortonclose     启用或禁用在队列中挂起的中止请求的早期丢弃")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# option redispatch     启用或禁用在连接故障情况下的会话重新分配")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# option dontlognull     启用和禁用 记录 空连接")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# option httpclose         每次请求完毕后主动关闭http通道，HA-Proxy不支持keep-alive模式")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# option forwardfor     获得客户端IP")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# option httplog        记录HTTP 请求,session 状态和计时器")]),t._v("\n    option httplog\n    option dontlognull\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),t._v(" connect "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),t._v(" client "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50000")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50000")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#前端配置，http_front名称可自定义")]),t._v("\nfrontend http_front\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bind *:443 ssl crt /etc/haproxy/cert.pem        启用ssl证书")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bind *:80                        发起http请求道80端口，会被转发到设置的ip及端口")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("bind")]),t._v(" *:80\n\n    stats "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#haproxy的状态管理页面，通过/haproxy?stats来访问")]),t._v("\n    stats uri /haproxy?stats\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# stats auth <user>:<passwd>")]),t._v("\n    default_backend http_back\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#后端配置，http_back名称可自定义")]),t._v("\nbackend http_back\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 负载均衡方式")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# source 根据请求源IP")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# static-rr 根据权重")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# leastconn 最少连接者先处理")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# uri 根据请求的uri")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# url_param 根据请求的url参数")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rdp-cookie 据据cookie(name)来锁定并哈希每一次请求")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# hdr(name) 根据HTTP请求头来锁定每一次HTTP请求")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# roundrobin 轮询方式")]),t._v("\n    balance roundrobin\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置健康检查页面")]),t._v("\n    option httpchk GET /index.html\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#传递客户端真实IP")]),t._v("\n    option forwardfor header X-Forwarded-For\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# inter 2000 健康检查时间间隔2秒")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rise 3 检测多少次才认为是正常的")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# fall 3 失败多少次才认为是不可用的")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# weight 30 权重")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 需要转发的ip及端口")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# server <name> <address>[:port] [settings ...]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default-server [settings ...]")]),t._v("\n    server node1 xxxxx:8081 check inter "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v(" rise "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" fall "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" weight "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n    server node2 xxxxx:8082 check inter "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v(" rise "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" fall "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" weight "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# server first  10.1.1.1:1080 cookie first  check inter 1000")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# server second 10.1.1.2:1080 cookie second check inter 1000")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# server transp ipv4@")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# server backup "${SRV_BACKUP}:1080" backup')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# server www1_dc1 "${LAN_DC1}.101:80"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# server www1_dc2 "${LAN_DC2}.101:80"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# haproxy的acl访问控制")]),t._v("\nfrontend http_front\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("bind")]),t._v(" *:80\n    stats uri /haproxy?stats\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建一个acl，is_http_back2是acl的名称，可自定义，用于判断主机名是否为www.back2.com")]),t._v("\n    acl is_http_back2 hdr_end"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" www.back2.com\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#通过正则判断主机名中是否为bbs.back.com或forum.back.com")]),t._v("\n    acl is_host_bbs hdr_reg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -i ^"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bbs.back.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("forum.back.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#判断ua是否为android")]),t._v("\n    acl is_ua_android hdr_reg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User-Agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -i android\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#判断主机名开头是否为img.或css.或js.")]),t._v("\n    acl is_host_static hdr_beg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -i img. css. js.\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#判断url路径中是否有/bbs")]),t._v("\n    acl is_path_bbs path_beg -i /bbs\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#判断url文件结尾")]),t._v("\n    acl is_php path_end -i .php\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#通过正则判断url中结尾以")]),t._v("\n    acl is_static_file url_reg -i /*."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("css"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("jpg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("png"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("jpeg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("gif"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#效果同上")]),t._v("\n    acl is_static_file2 path_end -i .css .jpg .png .jpeg .gif\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#如果主机名是www.back2.com那么就使用后端http_back2")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# use_backend <backend> [{if | unless} <condition>]")]),t._v("\n    use_backend http_back2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" is_http_back2 or is_ua_android\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#默认使用的后端")]),t._v("\n    default_backend http_back\n\nbackend http_back\n    balance roundrobin\n    option httpchk GET /index.html\n    option forwardfor header X-Forwarded-For\n    server node1 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.222:8080 check inter "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v(" rise "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" fall "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" weight "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n\nbackend http_back2\n    balance roundrobin\n    option httpchk GET /index.html\n    option forwardfor header X-Forwarded-For\n    server node2 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.222:8082 check inter "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v(" rise "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" fall "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" weight "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n")])])]),a("p",[a("code",[t._v("log")]),t._v(" 格式:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("log-format %T"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" %t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" Some"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" Text\nlog-format %"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("+Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" %t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" %s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" %"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("-Q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("r\n\nlog-format-sd %"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("+Q,+E"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("exampleSDID@1234"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("header")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("capture.req.hdr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n+---+------+-----------------------------------------------+-------------+\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" R "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" var  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" field name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.2")]),t._v(".2 and "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.2")]),t._v(".3 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" description"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  +---+------+-----------------------------------------------+-------------+\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %o   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" special variable, apply flags on all next var "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  +---+------+-----------------------------------------------+-------------+\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %B   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bytes_read           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from server to client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %CC  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" captured_request_cookie                       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %CS  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" captured_response_cookie                      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %H   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hostname")]),t._v("                                      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %HM  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" HTTP method "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ex: POST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %HP  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" HTTP request URI without query string "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %HQ  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" HTTP request URI query string "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ex: ?bar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("baz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %HU  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" HTTP request URI "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ex: /foo?bar"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("baz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %HV  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" HTTP version "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ex: HTTP/1.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %ID  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" unique-id                                     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %ST  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" status_code                                   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %T   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" gmt_date_time                                 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %Ta  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Active "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" of the request "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from TR to end"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %Tc  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Tc                                            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %Td  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Td "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Tt - "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Tq + Tw + Tc + Tr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %Tl  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" local_date_time                               "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %Th  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" connection handshake "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SSL, PROXY proto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %Ti  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" idle "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" before the HTTP request             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %Tq  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Th + Ti + TR                                  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %TR  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" to receive the full request from 1st byte"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %Tr  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Tr "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %Ts  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" timestamp                                     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %Tt  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Tt                                            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %Tw  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Tw                                            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %U   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bytes_uploaded       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from client to server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %ac  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" actconn                                       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %b   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" backend_name                                  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %bc  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" beconn      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("backend concurrent connections"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %bi  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" backend_source_ip       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connecting address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" IP          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %bp  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" backend_source_port     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("connecting address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %bq  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" backend_queue                                 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %ci  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" client_ip                 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accepted address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" IP          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %cp  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" client_port               "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accepted address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %f   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" frontend_name                                 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %fc  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" feconn     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("frontend concurrent connections"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %fi  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" frontend_ip              "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accepting address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" IP          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %fp  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" frontend_port            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accepting address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %ft  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" frontend_name_transport "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'~'")]),t._v(" suffix "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" SSL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %lc  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" frontend_log_counter                          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %hr  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" captured_request_headers default style        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %hrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" captured_request_headers CLF style            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %hs  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" captured_response_headers default style       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %hsl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" captured_response_headers CLF style           "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %ms  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" accept "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" milliseconds "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left-padded with "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %pid "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" PID                                           "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %r   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" http_request                                  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %rc  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" retries                                       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %rt  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" request_counter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HTTP req or TCP session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %s   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" server_name                                   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %sc  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" srv_conn     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server concurrent connections"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %si  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" server_IP                   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" IP          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %sp  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" server_port                 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %sq  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" srv_queue                                     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" numeric     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" S "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %sslc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" ssl_ciphers "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ex: AES-SHA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" S "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %sslv"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" ssl_version "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ex: TLSv1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("                       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %t   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" date_time      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("with millisecond resolution"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %tr  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" date_time of HTTP request                     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %trg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" gmt_date_time of start of HTTP request        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %trl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" local_date_time of start of HTTP request      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %ts  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" termination_state                             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" H "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" %tsc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" termination_state with cookie status          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  +---+------+-----------------------------------------------+-------------+\n")])])]),a("p",[t._v("错误页面重定向:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 200, 400, 403, 405, 408, 425, 429, 500, 502, 503, and 504 不支持404")]),t._v("\nerrorloc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nerrorloc302 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\nerrorfile "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h2",{attrs:{id:"keepalived"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keepalived"}},[t._v("#")]),t._v(" Keepalived")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.keepalived.org/manpage.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("故障转移 健康检查\n"),a("code",[t._v("vrrp")]),t._v("协议, 竞选 master, master 发送广播, master 挂掉, 备用节点接管")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("global_refs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 节点路由唯一标识")]),t._v("\n    router_id xxx\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 主备节点要用同一个vrrp实例名")]),t._v("\nvrrp_instance xx1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 备节点 BACKUP")]),t._v("\n    state MASTER\n    interface eth0\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0~255 用于区分vrrp实例")]),t._v("\n    virtual_router_id "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("51")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 节点优先级  主备差50")]),t._v("\n    priority "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 心跳间隔")]),t._v("\n    advert_init "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通信认证")]),t._v("\n    authentication "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        auth_type PASS\n        auth_pass xxxxxx\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 虚拟ip")]),t._v("\n    virtual_ipaddress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        xxxxx/24\n        xxxxx/24\n        xxxxx/24\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);